{% extends "base.html" %}
{% block title %}Admin - Images D√©tail pour {{ product.nom }}{% endblock %}

{% block content %}
    <div class="admin-container">
        <h2>üñºÔ∏è Gestion des Images de D√©tail pour: **{{ product.nom }}**</h2>
        <p class="back-link"><a href="{{ url_for('admin_manage_products') }}">‚Üê Retour √† la gestion des produits</a></p>
        
        {% if error %}<p class="error-message">{{ error }}</p>{% endif %}

        <div class="card-upload">
            <h3>Ajouter une Nouvelle Photo de D√©tail</h3>
            <form method="POST" enctype="multipart/form-data">
                <div class="form-field-group">
                    <label for="detail_image_file">S√©lectionner Fichier (JPG, PNG, GIF):</label>
                    <input type="file" id="detail_image_file" name="detail_image_file" accept="image/*" required class="text-input">
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="button primary">‚¨ÜÔ∏è T√©l√©charger l'Image</button>
                </div>
            </form>
        </div>
        
        <hr style="margin-top: 30px; margin-bottom: 30px;">

        <h3>Photos de D√©tail Actuelles ({{ detail_images|length }} images)</h3>
        
        {% if detail_images %}
            <div class="detail-images-grid">
                {% for image in detail_images %}
                <div class="detail-image-item">
                    <img src="{{ image.url }}" alt="Image de d√©tail" style="width: 100%; height: 150px; object-fit: cover; border-radius: 5px;">
                    
                    <form method="POST" action="{{ url_for('admin_delete_image_detail', image_id=image.id) }}" 
                          onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer cette photo de d√©tail ?');" 
                          style="margin-top: 10px;">
                        <button type="submit" class="button delete-small" style="background-color: var(--admin-red); color: white;">
                            Supprimer
                        </button>
                    </form>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Aucune image de d√©tail n'a √©t√© ajout√©e pour ce produit.</p>
        {% endif %}
        
    </div>

    <style>
        .detail-images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .detail-image-item {
            text-align: center;
            border: 1px solid var(--border-color);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            background-color: var(--card-bg);
        }
        .delete-small {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        .card-upload {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow-light);
            margin-top: 20px;
        }
    </style>
{% endblock %}
